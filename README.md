# Some project

## Требования

```
Node.JS 14.5.0+
MongoDB
```
## Инструкция по запуску
1. Создать конфиг. файл с именем `.<projectName>rc` вне каталога проэкта (чтобы не попал под git). В этом файле хранить чувствительные данные (токены доступа, пароли, адреса БД и т. п. ). Формат - json. Узнать имена ключей и имя проэкта можно в `src/config/index.js`(в этом файле значения по умолчанию). Или использовать переменные среды. Формат ключа переменной: <projectName>_<envKey>__<nestedKey>
2. `npm i`
3. `npm start` или другая нужная команда

## Команды
**npm start** - Запустить прод. сервер  
**npm run dev** - Запустить сервер для разработки  
**npm run test** - Запустить все тесты  
**npm run test:unit** - Выполнить юнит тесты  
**npm run test:integration** - Выполнить интеграционные тесты  
**npm run test:unit:watch** - Запустить юнит тесты в режиме наблюдения (перезапуск тестов при их изменении)  
**npm run test:integration:watch** - Запустить интеграционные тесты в режиме наблюдения (перезапуск тестов при их изменении)  
**npm run lint** - Запустить линтер с автоисправлением по содержмому папок `src` и `tests`  
**npm run inspect:cp** - Проверка исходников (`src/`) на копипаст  
**npm run seeds** - Наполнение бд данными  

## Структура папок
**src/**  - Исходники  
**src/domain-models/**  - Сущьности домена (бизнес логика)  
**src/use-cases/**  - Логика приложения  
**src/api/**  - Контроллеры. Предназначены для взаимодействия с протоколами обмена данными. Сгрупированы в папки по протоколу взаимодействия  
**src/api/rest/routers/**  - Http роуты. Сгрупированы в папки по ролям в приложении  
**src/api/rest/routers/general/**  - Публичные и общие для всех ролей http роуты  
**src/sys/**  - Системный код  приложения  
**tests/**  - Тесты  
**seeds/**  - Скрипты наполнения базы данными  
**report/**  - Отчет по копипасту (создаётся после запуска `npm run inspect:cp`)  
**doc/**  - документация API (создаётся после запуска `npm run doc`)  

## Ветки
**master** - Ветка для релизов  
**development** - Ветка для разработки, новые ветки делать из этой  

## Правила для внесения изменений
Когда нужно внести именения в код, следуй шагам ниже:  

1. Обнови локальною ветку для разработки
```
git checkout development
git pull origin development
```
2. Создай новую ветку на основе `development`, с номером тикета (или подходящим именем)
```
git checkout -b TICKET-123
```
3. Комить здесь все свои изменения, и не забудь добавить номер тикета в описании комита (если есть в PM-system)
```
git status -s
git commit -am 'feat: my latest changes where i did a lot of good staff #TICKET-123'
```

4. Выгрузи ветку в удалённый репозиторий
```
git push origin TICKET-123
```
5. Сделай pull request в ветку `development`

6. Проинформируй членов команды об изменениях (напиши в чате и передвинь тикет)

**ВНИМАНИЕ:** ***Не*** комить напрямую в ветку `master` или `development`, следуй инструкции выше. В ветке `master` должен быть только production-ready код. 

